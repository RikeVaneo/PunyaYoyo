SOAL 2

DELIMITER $$

CREATE PROCEDURE getMemberTier(
    IN p_id_anggota INT,
    OUT p_tier VARCHAR(20)
)
BEGIN
    DECLARE v_total INT;

    -- Ambil total_pinjaman berdasarkan id_anggota
    SELECT total_pinjaman INTO v_total
    FROM anggota
    WHERE id_anggota = p_id_anggota;

    -- Tentukan tier berdasarkan jumlah total peminjaman
    IF v_total IS NULL THEN
        SET p_tier = 'Member Not Found';
    ELSEIF v_total < 5 THEN
        SET p_tier = 'Bronze';
    ELSEIF v_total BETWEEN 5 AND 10 THEN
        SET p_tier = 'Silver';
    ELSE
        SET p_tier = 'Gold';
    END IF;
END $$

DELIMITER ;
